{% if solve.is_valid %}
    <div class="solution-block">
        <p>Решение: </p>
        {% if solve.k == 1 %}
        <p class="big-formuls-ftnz">
            Вероятность выпадения герба и решки одинаковы, \( p = q = 0,5 \).
            Вероятность того, что \(А\) выиграет до \(1\) броска равна \(0\), то есть: \(P_{A_1}=0\).<br>
            Вероятность того, что \(А\) выиграет не позднее \(1\) броска равна вероятности того, что \(А\)
            выиграет на \(1\) броске (при первом броске у А выпадет герб): \(P_{A_2}=0,5\).<br>
            Вероятность того, что \(B\) выиграет до \(1\) броска равна \(0\), то есть: \(P_{B_1}=0\).<br>
            Вероятность того, что \(B\) выиграет не позднее \(1\) броска равна вероятности того,что \(B\)
            выиграет на \(1\) броске (при первом броске у \(А\) выпадет решка, у \(B\) герб): \(P_{B_2}=0,5^{2}=0,25\).
        </p>
        {% elif solve.k == 2 %}
        <p class="big-formuls-ftnz">
            Вероятность выпадения герба и решки одинаковы, \( p = q = 0,5 \).
            Вероятность того, что \(А\) выиграет до \(2\) броска равна вероятности того, что \(А\) выиграет на \(1\)
            броске, то есть: \(P_{A_1}=0,5\).<br>
            Вероятность того, что \(А\) выиграет не позднее \(2\) броска равна сумме вероятности того, что \(А\)
            выиграет до \(2\) броска и что \(А\) выиграет на \(2\) броске (при \(1\) броске у \(А\) выпадет решка, у
            \(B\) решка, затем герб у \(A\)): \(P_{A_2}=P_{A_1} + 0,5^3=0,625\).<br>
            Вероятность того, что \(B\) выиграет до \(2\) броска равна вероятности того, что \(B\) выиграет на \(1\)
            броске (то есть при первом броске у \(А\) выпадет решка, у \(B\) герб): \(P_{B_1}=0,5^2=0,25\).<br>
            Вероятность того, что \(B\) выиграет не позднее \(2\) броска равна сумме вероятности того, что \(B\)
            выиграет до \(2\) броска и что \(B\) выиграет на \(2\) броске: \(P_{B_2}=P_{B_1} + 0,5^4=0,312\).
        </p>
        {% elif solve.k == 3 %}
        <p class="big-formuls-ftnz">
            Вероятность выпадения герба и решки одинаковы, \( p = q = 0,5 \).
            Вероятность того, что \(А\) выиграет на первом броске равна \(0,5\) (при первом броске у \(А\) выпадет герб).
            Вероятность того, что \(А\) выиграет на втором броске равна \({0,5}^{3}\) (при первом броске у \(А\) выпадет
            решка – \(0,5\), при первом броске у \(B\) выпадет решка – \(0,5\), при втором броске у \(А\) выпадет герб
            – \(0,5\)). Вероятность того, что \(A\) выиграет на \(k\) броске равна \(0,5^{2k-1}\) и аналогично с \(B\):
            вероятность выигрыша на \(k\) броске равна \(0,5^{2k}\).<br>
            Вероятность того, что \(А\) выиграет до \(3\) броска равна сумме вероятностей того, что \(А\) выиграет на
            \(1\) броске и на \(2\), то есть: \(P_{A_1}={0,5} + 0,5^3=0,625\).<br>
            Вероятность того, что \(А\) выиграет не позднее \(3\) броска равна сумме вероятности того, что \(А\)
            выиграет до \(3\) броска и что \(А\) выиграет на \(3\) броске: \(P_{A_2}=P_{A_1} + 0,5^5=0,656\).<br>
            Вероятность того, что \(B\) выиграет до \(3\) броска равна сумме вероятностей того, что \(B\) выиграет на
            \(1\) броске и на \(2\), то есть: \(P_{B_1}=0,5^2 + 0,5^4=0,312\).<br>
            Вероятность того, что \(B\) выиграет не позднее \(3\) броска равна сумме вероятности того, что \(B\)
            выиграет до \(3\) броска и что \(B\) выиграет на \(3\) броске: \(P_{B_2}=P_{B_1} + 0,5^6=0,328\).
        </p>
        {% else %}
        <p class="big-formuls-ftnz">
            Вероятность выпадения герба и решки одинаковы, \( p = q = 0,5 \).
            Вероятность того, что \(А\) выиграет на первом броске равна \(0,5\) (при первом броске у \(А\) выпадет
            герб). Вероятность того, что \(А\) выиграет на втором броске равна \({0,5}^{3}\) (при первом броске у \(А\) выпадет
            решка – \(0,5\), при первом броске у \(B\) выпадет решка – \(0,5\), при втором броске у \(А\) выпадет герб
            – \(0,5\)). Вероятность того, что \(A\) выиграет на \(k\) броске равна \(0,5^{2k-1}\) и аналогично с \(B\):
            вероятность выигрыша на \(k\) броске равна \(0,5^{2k}\).<br>
            Тогда вероятность того, что \(А\) выиграет до \( {{ solve.k }} \) броска равна сумме вероятностей того, что
            \(А\) выиграет на 1 броске, на 2 броске, …, на \( {{ solve.k_1 }} \) броске, то есть: \(P_{A_1}=0,5 +
            0,5^3 + ... + 0,5^{ {{ solve.dk_3 }} }={{ solve.P_A1 }}\).<br>
            Вероятность того, что \(А\) выиграет на \( {{ solve.k }} \) броске равна сумме вероятностей того, что
            \(А\) выиграет до \( {{ solve.k }} \) броска и на \( {{ solve.k }} \) броске, то есть: \(P_{A_2}=P_{A_1} +
            0,5^{ {{ solve.dk_1 }} }={{ solve.P_A2 }}\).<br>
            Вероятность того, что \(B\) выиграет до \( {{ solve.k }} \) броска равна сумме вероятностей того, что
            \(B\) выиграет на 1 броске, на 2 броске, …, на \( {{ solve.k_1 }} \) броске, то есть: \(P_{B_1}=0,5^2 +
            0,5^4 + ... + 0,5^{ {{ solve.dk_2 }} }={{ solve.P_B1 }}\).<br>
            Вероятность того, что \(B\) выиграет на \( {{ solve.k }} \) броске равна сумме вероятностей того, что
            \(B\) выиграет до \( {{ solve.k }} \) броска и на \( {{ solve.k }} \) броске, то есть: \(P_{B_2}=P_{B_1} +
            0,5^{ {{ solve.dk }} }={{ solve.P_B2 }}\).
        </p>
        {% endif %}
        <p class="big-formuls-ftnz">
            Чтобы найти вероятность выигрыша игрока \(А\) при сколь угодно долгой игре, нужно положить \(
            k \rightarrow \infty \). По формуле суммы бесконечно убывающей геометрической прогрессии получаем:
            \(P_{A_3} = \large \frac{1}{2} \frac{1}{1 - \frac{1}{4}} \) \( = {{ solve.P_A3 }} \) и для игрока B:
            \( P_{B_3} = 1 - P_{A_3} = {{ solve.P_B3 }}\).
        </p>
    </div>
{% else %}
    <form class="form-horizontal" action="{{ task.get_absolute_url }}" method="get">
        <div class="form-group">
            <div class="col-xs-3">
                <label for="k" class="control-label big-formuls-ftnz">Введите \(k\)</label>
            </div>

            <div class="col-xs-9">
                <input class="form-control" type="number" id="k" name="k" required>
            </div>
        </div>
        <div class="form-group">
            <div class="col-xs-12 ">
                <button class="btn btn-success" type="submit">Получить решение!</button>
            </div>
        </div>
    </form>

{% endif %}